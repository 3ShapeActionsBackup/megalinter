<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Error 404 :(</title>

    <script>
        window.onload = async () => {
            const defaultVersion = 'latest';
            const destination = window.location.href;
            if (window.location.href.includes("megalinter.io/" + defaultVersion)) {
                return;
            }
            else if (window.location.href.includes("megalinter.io/")) {
                const semverRegex = /\d+\.\d+\.\d+/;
                let redirectLocation = ""
                const match = window.location.href.match(semverRegex);
                if (match) {
                    redirectLocation = window.location.href.replace(
                        "megalinter.io/" + match[0] + "/",
                        "megalinter.io/" + defaultVersion + "/"
                    );
                    const response = await fetch(redirectLocation, { method: "HEAD" });
                    if (response.status > 400) {
                        console.log(`Unable to reach ${redirectLocation}`);
                        redirectLocation = window.location.href.replace(
                            "megalinter.io/",
                            "megalinter.io/" + defaultVersion + "/"
                        );
                    }
                }
                else {
                    redirectLocation = window.location.href.replace(
                        "megalinter.io/",
                        "megalinter.io/" + defaultVersion + "/"
                    );
                }
                document.getElementById("body").innerHTML = "Redirecting to " + redirectLocation + " ...";
                window.location.href = redirectLocation;
            }
        }
    </script>
</head>

<body id="body" style="text-align: center">
    Page not found :(
</body>

</html>